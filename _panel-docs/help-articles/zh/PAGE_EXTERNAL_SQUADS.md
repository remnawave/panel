## 外部分组

通过使用外部分组，你可以在用户请求订阅时覆盖其使用的某些设置或模板。 _每个用户同一时间只能拥有一个活动的外部分组。_

例如，你可以为不同的用户群体设置不同的路由方案（如 Happ、v2rayTUN），而不同的路由方案也可以定义在模板中。

通过右侧的附加菜单，你可以快速为所有用户分配一个外部分组 (或反向操作，将所有用户从该外部分组中移除)。

如果用户没有被分配任何外部分组 - 则会使用 "**订阅（Subscription）**" 页面中的全局设置， 以及默认的 "**Default**" 客户端配置模板。

---

接下来，我们来逐步了解外部分组卡片中可用的设置。

### 模板覆盖（Template Override）

当用户请求订阅时，系统会根据请求来源的客户端类型为其提供相应的模板。 例如，如果客户端基于 Mihomo 内核运行，Remnawave 会自动识别，并提供 **Mihomo** 类型 的 **Default** 模板（可在模板管理页面进行设置）。

在 Remnawave 中，你可以为每种类型（Mihomo、Stash、Xray Json、Singbox、Clash）创建任意数量的模板，但默认情况下系统总是会提供 **Default** 模板。

**而外部分组中的此项设置，正是用于覆盖这一默认行为。**

举例来说，假设我们希望某个外部分组使用 _自定义模板（Custom Template）_ ,该模板属于 **Mihomo** 类型, 那么只需在对应选项中选择该模板并保存更改。 此后，当属于该外部分组的用户发起订阅请求时，他们将收到 _Custom Template_ 模板, 而不是 _Default_.

如果你将模板覆盖字段留空，则该分组中的用户仍会接收 _Default_ 模板。

_请注意，在 “请求订阅的应用（Response Rules）” 中的模板覆盖优先级高于本处设置。_

### 设置（订阅）

在此部分，你可以覆盖“订阅（Subscription）→ 设置（Settings）”中定义的全局配置。
通过这种方式，你可以一次性为整个用户组覆盖多个参数。

请记住，如果某个参数被显式覆盖（包括空值），该值就会被应用。 只有删除覆盖（点击垃圾桶图标）才能取消覆盖。

例如，假设在全局设置中，我的订阅标题是 “Remnawave”， 但我想为 10 个特定用户将其改为 “Remnawave v.2.x”， 这时我只需在此部分中修改该参数，然后将此外部分组分配给这 10 位用户即可。

### 主机（Hosts）

延续上面的逻辑，在此部分中，你可以完全覆盖你在每个 **主机（Host）** 卡片中看到的某些参数。

**此处设置的覆盖值将应用于用户在订阅中收到的所有主机。**

例如，通过覆盖 `vlessRouteId` 参数，我们可以为特定用户组（即该外部分组中的用户）分配特定值，从而实现整组用户的 "_路由（route）_" 划分。 当然，这种路由设置的另一半逻辑在服务器端的配置文件（Config Profile）中定义。
